- Effect: 'Allow'
  Action:
    - 'dynamodb:GetItem'
    - 'dynamodb:BatchGetItem'
    - 'dynamodb:Query'
    - 'dynamodb:Scan'
    - 'dynamodb:PutItem'
    - 'dynamodb:UpdateItem'
    - 'dynamodb:DeleteItem'
  Resource:
    - Fn::Join:
        - ''
        - - 'arn:aws:dynamodb:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':table/'
          - Ref: TogglEntriesTable
    - Fn::Join:
        - ''
        - - 'arn:aws:dynamodb:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':table/'
          - Ref: TogglEntriesTable
          - '/index/*'
    - Fn::Join:
        - ''
        - - 'arn:aws:dynamodb:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':table/'
          - Ref: TogglMappingTable
    - Fn::Join:
        - ''
        - - 'arn:aws:dynamodb:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':table/'
          - Ref: TogglMappingTable
          - '/index/*'
    - Fn::Join:
        - ''
        - - 'arn:aws:dynamodb:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':table/'
          - Ref: TogglTasksTable
    - Fn::Join:
        - ''
        - - 'arn:aws:dynamodb:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':table/'
          - Ref: TogglTasksTable
          - '/index/*'
- Effect: 'Allow'
  Action:
    - 'ssm:GetParameters'
  Resource:
    - Fn::Join:
        - ''
        - - 'arn:aws:ssm:${self:provider.region}:'
          - Ref: 'AWS::AccountId'
          - ':parameter/${self:service}-${self:provider.stage}'
