--- # ----------- Public lambda functions -------------

getApiVersion:
  handler: src/handler.getApiVersion
  timeout: 20
  events:
    - http:
        path: api-version
        method: get
        private: true

# ----------- Authenticated lambda functions -------

getTimeEntries:
  handler: src/handler.getTimeEntries
  timeout: 20
  events:
    - http:
        path: entries
        method: get
        private: true

getTimeEntry:
  handler: src/handler.getTimeEntry
  timeout: 20
  events:
    - http:
        path: entries/by-id/{entryId}
        method: get
        private: true

getUnsyncedTimeEntries:
  handler: src/handler.getUnsyncedTimeEntries
  timeout: 20
  events:
    - http:
        path: entries/by-sync-status/unsynced
        method: get
        private: true

getStatus:
  handler: src/handler.getTimeEntriesWithStatus
  timeout: 20
  events:
    - http:
        path: entries/by-status/{status}
        method: get
        private: true

getTogglEntries:
  handler: src/handler.getTogglEntries
  timeout: 20
  events:
    - http:
        path: toggl/latest/{days}
        method: get
        private: true

syncEntries:
  handler: src/handler.syncLatestEntriesToDatabase
  timeout: 20
  events:
    - http:
        path: toggl/syncronise
        method: post
        request:
          parameters:
            querystrings:
              dryrun: false
        private: true

syncDatabaseToToggl:
  handler: src/handler.syncDatabaseEntriesToToggl
  timeout: 20
  events:
    - http:
        path: entries/syncronise
        method: post
        private: true
